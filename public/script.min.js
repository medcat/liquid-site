$(function(){"use strict";var keyBind,refreshBox;$("body").scrollspy({target:".main-nav"});$("pre:not(.no-highlight)").each(function(e,t){var n=$(t),r;n.addClass("display");r=$("<code />");r.addClass("compiled highlight");$.ajax({url:"https://liquidscript.io/run",type:"POST",dataType:"json",data:{code:n.text(),type:"generated"},success:function(e){if(!e.error&&e.result){r.html($(e.result).children("div pre").html());n.append(r)}}})});refreshBox=function(){$("#try code.compiled").removeClass("error");$.ajax({url:"https://liquidscript.io/run",type:"POST",dataType:"json",data:{code:$("#try textarea").val(),type:"generated"},success:function(e){if(!e.error&&e.result){$("#try code.compiled").html($(e.result).children("div pre").html())}else{$("#try code.compiled").text(e.error);$("#try code.compiled").addClass("error")}}})};$("#try").append("<code class='compiled highlight'></code>");$("#try textarea").on("keydown",function(){if(keyBind){clearTimeout(keyBind)}keyBind=setTimeout(refreshBox,500)});$.ajax({url:"https://liquidscript.io/version",success:function(e){$("#brand").append(" v"+e)}});fakeConsole=window.fakeConsole={};fakeConsole._buffer="";fakeConsole.concat=function(){for(var e=0;e<arguments.length;e++){if(arguments[e]&&arguments[e].toString())fakeConsole._buffer+=arguments[e].toString();fakeConsole._buffer+="\n"}};fakeConsole.warn=fakeConsole.error=fakeConsole.log=fakeConsole.concat;$("#run").click(function(){var code=$("#try code.compiled").text();var toExec="(function(console){"+code+"})(window.fakeConsole)";try{var output=eval(toExec);var result="";if(fakeConsole._buffer)result+="Console log:\n\n"+fakeConsole._buffer;if(output)result+=(result?"\n\n":"")+"Output:\n\n"+output.toString();$("#output").text(result||"Code did not return any output")}catch(e){$("#output").text(e)}fakeConsole._buffer=""});$("#examples").change(function(){var e=$(this).find("option:selected").val();$.get("/examples/"+e,function(e){$("#try textarea").val(e);refreshBox();$("#try textarea").trigger("autosize.resize")})});$("#input").autosize();$("#input").trigger("autosize.resize");refreshBox()})
